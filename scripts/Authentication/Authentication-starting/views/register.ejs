<%- include('partials/header') %>
<div class="container mt-5">
  <h1>Register</h1>

  <% if (locals.errorMessage) { %>
  <div class="alert alert-danger" role="alert"><%= locals.errorMessage %></div>
  <% } %> <% if (locals.invalidOtp) { %>
  <div class="alert alert-danger" role="alert"><%= locals.invalidOtp %></div>
  <% } %>

  <div class="row">
    <div class="col-sm-8">
      <div class="card">
        <div class="card-body">
          <!-- Makes POST request to /register route -->
          <form action="/register" method="POST">
            <div class="form-group">
              <label for="email">Email</label>
              <input type="email" class="form-control" name="username" />
            </div>
            <div class="form-group">
              <label for="password">Password</label>
              <div class="input-group">
                <input type="password" class="form-control" name="password" id="password" />
                <div class="input-group-append">
                  <div class="input-group-text" style="margin-left: 10px">
                    <input
                      type="checkbox"
                      name="showPassword"
                      id="showPasswordToggle"
                      style="margin-right: 5px"
                    />
                    Show Password
                  </div>
                </div>
              </div>
            </div>
            <button type="submit" class="btn btn-dark">Register</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var showPasswordToggle = document.getElementById('showPasswordToggle');
    var passwordInput = document.getElementById('password');

    if (showPasswordToggle && passwordInput) {
      showPasswordToggle.addEventListener('change', function () {
        passwordInput.type = this.checked ? 'text' : 'password';
      });
    }
  });
</script>

<%- include('partials/header') %>
